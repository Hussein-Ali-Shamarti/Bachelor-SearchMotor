{"ast":null,"code":"var _jsxFileName = \"/Users/husseinshamarti/Desktop/Skole/Bachelor-SearchMotorAI/Bachelor-SearchMotor/frontend/src/SearchPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { ClipLoader } from \"react-spinners\";\nimport \"./SearchPage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchPage = () => {\n  _s();\n  const [query, setQuery] = useState(\"\");\n  const [results, setResults] = useState([]);\n  const [visibleResults, setVisibleResults] = useState(5);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [selectedArticle, setSelectedArticle] = useState(null);\n  const [articleSummary, setArticleSummary] = useState(\"\");\n  const [summaryLoading, setSummaryLoading] = useState(false);\n\n  // Backend URL from environment variable\n  const backendUrl = process.env.REACT_APP_BACKEND_URL || \"http://127.0.0.1:5001\";\n\n  // Generate embedding for the search query\n  const generateEmbedding = async query => {\n    try {\n      const response = await axios.post(`${backendUrl}/generate-embedding`, {\n        text: query\n      });\n      return response.data.embedding;\n    } catch (error) {\n      console.error(\"Embedding API Error:\", error);\n      setError(\"Failed to generate embedding. Please check your connection or try again later.\");\n      return null;\n    }\n  };\n  const fetchArticleSummary = async articleId => {\n    try {\n      setSummaryLoading(true);\n      setArticleSummary(\"\"); // Clear previous summary\n      console.log(`Fetching summary for article ID: ${articleId}`);\n\n      // Use Server-Sent Events (SSE) to stream the summary\n      const eventSource = new EventSource(`${backendUrl}/article-summary/${articleId}`);\n      eventSource.onmessage = event => {\n        if (event.data === \"END\") {\n          // End of the stream\n          eventSource.close();\n          setSummaryLoading(false);\n          console.log(\"Summary streaming complete.\");\n        } else {\n          // Append the word to the summary\n          setArticleSummary(prevSummary => prevSummary + \" \" + event.data);\n        }\n      };\n      eventSource.onerror = event => {\n        console.error(\"EventSource failed:\", event);\n        eventSource.close();\n        setSummaryLoading(false);\n        setArticleSummary(\"Error fetching summary. Please try again.\");\n      };\n    } catch (err) {\n      console.error(\"Failed to fetch article summary:\", err);\n      setArticleSummary(\"Error fetching summary. Please try again.\");\n      setSummaryLoading(false);\n    }\n  };\n\n  // Handle the search functionality\n  const handleSearch = async () => {\n    if (!query.trim()) {\n      setError(\"Please enter a search query.\");\n      return;\n    }\n    setLoading(true);\n    setError(\"\");\n    setResults([]);\n    setVisibleResults(5);\n    setSelectedArticle(null);\n    setArticleSummary(\"\");\n    const embedding = await generateEmbedding(query);\n    if (!embedding) {\n      setLoading(false);\n      return;\n    }\n    try {\n      const response = await axios.post(`${backendUrl}/ai-search`, {\n        embedding,\n        k: 50\n      });\n      if (response.data.error) {\n        setError(response.data.error);\n      } else if (Array.isArray(response.data) && response.data.length > 0) {\n        setResults(response.data);\n      } else {\n        setError(\"No relevant articles found.\");\n      }\n    } catch (err) {\n      setError(\"Failed to fetch results. Ensure the backend server is running.\");\n      console.error(\"Search API Error:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Load more results on button click\n  const loadMoreResults = () => setVisibleResults(prev => prev + 10);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"AI-Powered Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: query,\n        onChange: e => setQuery(e.target.value),\n        placeholder: \"Enter search query...\",\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSearch,\n        className: \"search-button\",\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-spinner\",\n      children: /*#__PURE__*/_jsxDEV(ClipLoader, {\n        size: 50,\n        color: \"#123abc\",\n        loading: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"results-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results-list\",\n        children: [results.length === 0 && !loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No results found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: results.slice(0, visibleResults).map(article => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: `result-item ${(selectedArticle === null || selectedArticle === void 0 ? void 0 : selectedArticle.id) === article.id ? \"selected\" : \"\"}`,\n            onClick: () => {\n              if ((selectedArticle === null || selectedArticle === void 0 ? void 0 : selectedArticle.id) !== article.id) {\n                setSelectedArticle(article);\n                setArticleSummary(\"\"); // Clear previous summary\n                fetchArticleSummary(article.id);\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: article.title || \"No Title Available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Author(s):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 21\n              }, this), \" \", article.author || \"Unknown\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Abstract:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 21\n              }, this), \" \", article.abstract ? article.abstract.substring(0, 100) + \"...\" : \"No abstract available.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 19\n            }, this)]\n          }, article.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this), results.length > visibleResults && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loadMoreResults,\n          className: \"load-more-button\",\n          children: \"Load More\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), selectedArticle && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selected-article-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Article Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Title:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this), \" \", selectedArticle.title || \"N/A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"ISBN:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this), \" \", selectedArticle.isbn || \"N/A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Author(s):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this), \" \", selectedArticle.author || \"Unknown\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Publication Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 15\n          }, this), \" \", selectedArticle.publication_date || \"N/A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this), selectedArticle.pdf_url && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"PDF URL:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: selectedArticle.pdf_url,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            children: \"View PDF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Keywords:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this), \" \", selectedArticle.keywords ? selectedArticle.keywords.join(\", \") : \"None\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Abstract:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this), \" \", selectedArticle.abstract || \"No abstract available.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"article-summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this), summaryLoading ? /*#__PURE__*/_jsxDEV(ClipLoader, {\n            size: 30,\n            color: \"#123abc\",\n            loading: summaryLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: articleSummary || \"No summary available.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSelectedArticle(null),\n          className: \"back-button\",\n          children: \"Back to Results\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchPage, \"rf4BTwDNgdObeppq0b6Gz8sR1Oc=\");\n_c = SearchPage;\nexport default SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useState","axios","ClipLoader","jsxDEV","_jsxDEV","SearchPage","_s","query","setQuery","results","setResults","visibleResults","setVisibleResults","loading","setLoading","error","setError","selectedArticle","setSelectedArticle","articleSummary","setArticleSummary","summaryLoading","setSummaryLoading","backendUrl","process","env","REACT_APP_BACKEND_URL","generateEmbedding","response","post","text","data","embedding","console","fetchArticleSummary","articleId","log","eventSource","EventSource","onmessage","event","close","prevSummary","onerror","err","handleSearch","trim","k","Array","isArray","length","loadMoreResults","prev","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","onClick","size","color","slice","map","article","id","title","author","abstract","substring","isbn","publication_date","pdf_url","href","rel","keywords","join","_c","$RefreshReg$"],"sources":["/Users/husseinshamarti/Desktop/Skole/Bachelor-SearchMotorAI/Bachelor-SearchMotor/frontend/src/SearchPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { ClipLoader } from \"react-spinners\";\nimport \"./SearchPage.css\";\n\nconst SearchPage = () => {\n  const [query, setQuery] = useState(\"\");\n  const [results, setResults] = useState([]);\n  const [visibleResults, setVisibleResults] = useState(5);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [selectedArticle, setSelectedArticle] = useState(null);\n  const [articleSummary, setArticleSummary] = useState(\"\");\n  const [summaryLoading, setSummaryLoading] = useState(false);\n\n  // Backend URL from environment variable\n  const backendUrl =\n    process.env.REACT_APP_BACKEND_URL || \"http://127.0.0.1:5001\";\n\n  // Generate embedding for the search query\n  const generateEmbedding = async (query) => {\n    try {\n      const response = await axios.post(`${backendUrl}/generate-embedding`, {\n        text: query\n      });\n      return response.data.embedding;\n    } catch (error) {\n      console.error(\"Embedding API Error:\", error);\n      setError(\n        \"Failed to generate embedding. Please check your connection or try again later.\"\n      );\n      return null;\n    }\n  };\n\n  const fetchArticleSummary = async (articleId) => {\n    try {\n      setSummaryLoading(true);\n      setArticleSummary(\"\"); // Clear previous summary\n      console.log(`Fetching summary for article ID: ${articleId}`);\n\n      // Use Server-Sent Events (SSE) to stream the summary\n      const eventSource = new EventSource(\n        `${backendUrl}/article-summary/${articleId}`\n      );\n\n      eventSource.onmessage = (event) => {\n        if (event.data === \"END\") {\n          // End of the stream\n          eventSource.close();\n          setSummaryLoading(false);\n          console.log(\"Summary streaming complete.\");\n        } else {\n          // Append the word to the summary\n          setArticleSummary((prevSummary) => prevSummary + \" \" + event.data);\n        }\n      };\n\n      eventSource.onerror = (event) => {\n        console.error(\"EventSource failed:\", event);\n        eventSource.close();\n        setSummaryLoading(false);\n        setArticleSummary(\"Error fetching summary. Please try again.\");\n      };\n    } catch (err) {\n      console.error(\"Failed to fetch article summary:\", err);\n      setArticleSummary(\"Error fetching summary. Please try again.\");\n      setSummaryLoading(false);\n    }\n  };\n\n  // Handle the search functionality\n  const handleSearch = async () => {\n    if (!query.trim()) {\n      setError(\"Please enter a search query.\");\n      return;\n    }\n\n    setLoading(true);\n    setError(\"\");\n    setResults([]);\n    setVisibleResults(5);\n    setSelectedArticle(null);\n    setArticleSummary(\"\");\n\n    const embedding = await generateEmbedding(query);\n    if (!embedding) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${backendUrl}/ai-search`, {\n        embedding,\n        k: 50\n      });\n\n      if (response.data.error) {\n        setError(response.data.error);\n      } else if (Array.isArray(response.data) && response.data.length > 0) {\n        setResults(response.data);\n      } else {\n        setError(\"No relevant articles found.\");\n      }\n    } catch (err) {\n      setError(\n        \"Failed to fetch results. Ensure the backend server is running.\"\n      );\n      console.error(\"Search API Error:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Load more results on button click\n  const loadMoreResults = () => setVisibleResults((prev) => prev + 10);\n\n  return (\n    <div className=\"search-page-container\">\n      <h1>AI-Powered Search</h1>\n\n      {/* Search Input */}\n      <div className=\"search-section\">\n        <input\n          type=\"text\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          placeholder=\"Enter search query...\"\n          className=\"search-input\"\n        />\n        <button onClick={handleSearch} className=\"search-button\">\n          Search\n        </button>\n      </div>\n\n      {/* Loading Spinner */}\n      {loading && (\n        <div className=\"loading-spinner\">\n          <ClipLoader size={50} color={\"#123abc\"} loading={loading} />\n        </div>\n      )}\n\n      {/* Error Message */}\n      {error && <p className=\"error-message\">{error}</p>}\n\n      {/* Results & Selected Article Side by Side */}\n      <div className=\"results-container\">\n        {/* Scrollable Results List */}\n        <div className=\"results-list\">\n          {results.length === 0 && !loading ? (\n            <p>No results found.</p>\n          ) : (\n            <ul>\n              {results.slice(0, visibleResults).map((article) => (\n                <li\n                  key={article.id}\n                  className={`result-item ${\n                    selectedArticle?.id === article.id ? \"selected\" : \"\"\n                  }`}\n                  onClick={() => {\n                    if (selectedArticle?.id !== article.id) {\n                      setSelectedArticle(article);\n                      setArticleSummary(\"\"); // Clear previous summary\n                      fetchArticleSummary(article.id);\n                    }\n                  }}\n                >\n                  <h4>{article.title || \"No Title Available\"}</h4>\n                  <p>\n                    <strong>Author(s):</strong> {article.author || \"Unknown\"}\n                  </p>\n                  <p>\n                    <strong>Abstract:</strong>{\" \"}\n                    {article.abstract\n                      ? article.abstract.substring(0, 100) + \"...\"\n                      : \"No abstract available.\"}\n                  </p>\n                </li>\n              ))}\n            </ul>\n          )}\n\n          {/* Load More Button */}\n          {results.length > visibleResults && (\n            <button onClick={loadMoreResults} className=\"load-more-button\">\n              Load More\n            </button>\n          )}\n        </div>\n\n        {/* Article Details */}\n        {selectedArticle && (\n          <div className=\"selected-article-container\">\n            <h2>Article Details</h2>\n            <p>\n              <strong>Title:</strong> {selectedArticle.title || \"N/A\"}\n            </p>\n            <p>\n              <strong>ISBN:</strong> {selectedArticle.isbn || \"N/A\"}\n            </p>\n            <p>\n              <strong>Author(s):</strong> {selectedArticle.author || \"Unknown\"}\n            </p>\n            <p>\n              <strong>Publication Date:</strong>{\" \"}\n              {selectedArticle.publication_date || \"N/A\"}\n            </p>\n            {selectedArticle.pdf_url && (\n              <p>\n                <strong>PDF URL:</strong>{\" \"}\n                <a\n                  href={selectedArticle.pdf_url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  View PDF\n                </a>\n              </p>\n            )}\n            <p>\n              <strong>Keywords:</strong>{\" \"}\n              {selectedArticle.keywords\n                ? selectedArticle.keywords.join(\", \")\n                : \"None\"}\n            </p>\n            <p>\n              <strong>Abstract:</strong>{\" \"}\n              {selectedArticle.abstract || \"No abstract available.\"}\n            </p>\n\n            {/* Article Summary */}\n            <div className=\"article-summary\">\n              <h3>Summary</h3>\n              {summaryLoading ? (\n                <ClipLoader\n                  size={30}\n                  color={\"#123abc\"}\n                  loading={summaryLoading}\n                />\n              ) : (\n                <p>{articleSummary || \"No summary available.\"}</p>\n              )}\n            </div>\n\n            <button\n              onClick={() => setSelectedArticle(null)}\n              className=\"back-button\"\n            >\n              Back to Results\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SearchPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}